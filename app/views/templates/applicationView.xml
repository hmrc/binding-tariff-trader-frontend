<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" version="2.0">
    <xsl:include href="./app/assets/stylesheets/hmrc-frontend-fop-conversions.xsl"/>
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" media-type="application/pdf"/>

    <xsl:template match="div[@class='govuk-body']" mode="pdf">
        <fo:block xsl:use-attribute-sets="govuk-body">
            <xsl:comment>Applying govuk-body template</xsl:comment>
            <xsl:apply-templates select="node()"/>
        </fo:block>
    </xsl:template>

    <xsl:template match="div" mode="pdf">
        <fo:block>
            <xsl:comment>Applying standard div template</xsl:comment>
            <xsl:apply-templates select="node()"/>
        </fo:block>
    </xsl:template>

    <xsl:template name="commonContent">
        <fo:block xsl:use-attribute-sets="govuk-body">
            First block with stylesheet
        </fo:block>
    </xsl:template>

    <xsl:template name="commonContent2">
        <fo:block xsl:use-attribute-sets="govuk-body2">
            Second block with different stylesheet
        </fo:block>
    </xsl:template>

    <xsl:template match = "/">
        <fo:root xml:lang="en" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:fox="http://xmlgraphics.apache.org/fop/extensions">
            <fo:layout-master-set>
                <fo:simple-page-master master-name="main" page-height="297mm" page-width="210mm" margin-top="1.5cm"
                                       margin-bottom="1.5cm" margin-left="1.5cm" margin-right="1.5cm">
                    <fo:region-body region-name="xsl-region-body" margin-top="3cm" margin-bottom="0.5cm"/>
                    <fo:region-before region-name="xsl-region-before"/>
                    <fo:region-after region-name="xsl-region-after"/>
                </fo:simple-page-master>
            </fo:layout-master-set>

            <fo:declarations>
                <pdf:catalog xmlns:pdf="http://xmlgraphics.apache.org/fop/extensions/pdf">
                    <pdf:dictionary type="normal" key="ViewerPreferences">
                        <pdf:boolean key="DisplayDocTitle">true</pdf:boolean>
                    </pdf:dictionary>
                </pdf:catalog>
            </fo:declarations>

            <fo:page-sequence master-reference="main">
                <fo:flow flow-name="xsl-region-body" font-size="11pt" text-align="left">
                    <xsl:call-template name="commonContent"/>
                    <xsl:call-template name="commonContent2"/>
                    <xsl:apply-templates select="." mode="pdf"/>
                </fo:flow>
            </fo:page-sequence>
        </fo:root>
    </xsl:template>
</xsl:stylesheet>
