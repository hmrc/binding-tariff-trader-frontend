@*
 * Copyright 2020 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.FrontendAppConfig
@import viewmodels.PdfViewModel
@import utils.Dates

@(appConfig: FrontendAppConfig, pdf: PdfViewModel, getCountryName: String => Option[String],
        compositeMode: Boolean = false)(implicit request: Request[_], messages: Messages)

@createLink(path: String)(implicit req: play.api.mvc.Request[_]) = @{
    s"${appConfig.host}${routes.Assets.versioned(path)}"
}

<html>
    <head>
        <style>
            body {
    counter-reset: sec-counter;
}
.govuk-panel--confirmation {
	color: #fff;
	background: #00703C;
	margin-top: 30px;
}
.print-save-application {
    position: relative;
    display: inline-block;
    margin: 0 15px 15px 0;
    border-bottom: 1px solid #0b0c0c;
}
.print-this__link, .print-this__link:visited, .print-this__link:link, .save-this__link, .save-this__link:visited, .save-this__link:link {
    color: #0b0c0c;
    font-size: 16px;
    text-decoration: none;
}
.print-document {
    border: 1px solid #6f777b;
    box-shadow: 6px 6px 0 0 #dee0e2;
    padding: 50px 50px;
    height: auto;
    position: relative;
    margin-bottom: 2em;
}

.print-document h2, h3, h4 {
    margin-top: 0;
}

.print-document .print-header {
    position: relative;
    //top: 10mm;
}


.print-document .logo-text {
   font-size: 24px;
   font-weight: normal;
   margin: 0;
   line-height: 1;
}
.print-document .print-header h2 {
    text-align: right;
    margin-top: 2em;
    font-size: 1.2em;
    color: #00703C;
    font-weight: 600;
    margin-right: 15px;
}

.crown-logo-atar{
    height: 100px;
    width:auto;
    padding-left: 8px;
    margin-right: -15px;
}

.print-document .information-box {
    border: 2px solid #00703C;
    display: block;
    margin-bottom: 1em;
    padding: 5px 10px;
    width: 100%;
    background-color: #e1f3f1;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    box-sizing: border-box;
}

.print-document .print-header h3 {
    text-align: right;
    margin-top: 2em;
    font-size: 1.2em;
    color: #00703C;
    font-weight: 600
}
.print-document .hero-text {
    margin-bottom: 0.26316em;
    font-size: 1.4em;
    font-weight: 700;
}
.print-document .reference-number {
    font-size: 36px;
}
.print-document .footer-page-date {
     float: right;
 }
.print-document h3 {
    margin-top: 1em;
    margin-bottom: 0.4em;
    font-size: 1.8em;
    font-weight: 600;
}
.print-header, .header-space,
.print-footer, .footer-space {
  //height: 45mm;
}
.print-document__information-box {
    border: 2px solid #00703C;
    display: block;
    margin-bottom: 1em;
    padding: 5mm;
    width: 100%;
    background-color: #e1f3f1;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    box-sizing: border-box;
    -webkit-print-color-adjust: exact
}

.date-of-result, .decision-service-version {
    border-bottom: 2px solid #00703C
}

.date-of-result h3 {
    margin-bottom: 0
}

.about-this-result-box {
    background: #e1f3f1;
    padding: 1px 10px;
    font-size: 15px;
    -webkit-print-color-adjust: exact
}
.about-this-result-box-do-not-send {
    height: 480px;
}

.about-this-result, .date-of-result {
    margin-top: 1em;
    margin-bottom: 1em;
}

.print-document .column-one-half {
    width: 50%;
    float: left;
}
.print-document .column-one-third {
    width: 33%;
    float: left;
}
.print-document .column-two-thirds {
    width: 66%;
    float: left;
}
.print-pages {
    -webkit-transform-origin:  top left;
    -moz-transform-origin:  top left;
    -ms-transform-origin:  top left;
    -o-transform-origin:  top left;
    transform-origin:  top left;
}

@@media screen and (max-width: 1100px) {
    .print-pages {
        -webkit-transform: scale(0.9);
        -moz-transform:    scale(0.9);
        -ms-transform:     scale(0.9);
        -o-transform:      scale(0.9);
        transform:         scale(0.9);
    }
}

@@media screen and (max-width: 1000px) {
    .print-pages {
        -webkit-transform: scale(0.8);
        -moz-transform:    scale(0.8);
        -ms-transform:     scale(0.8);
        -o-transform:      scale(0.8);
        transform:         scale(0.8);
    }
}

@@media screen and (max-width: 900px) {
    .print-pages {
        -webkit-transform: scale(0.7);
        -moz-transform:    scale(0.7);
        -ms-transform:     scale(0.7);
        -o-transform:      scale(0.7);
        transform:         scale(0.7);
    }
}

@@media screen and (max-width: 800px) {
    .print-pages {
        -webkit-transform: scale(0.6);
        -moz-transform:    scale(0.6);
        -ms-transform:     scale(0.6);
        -o-transform:      scale(0.6);
        transform:         scale(0.6);
    }
}

@@media screen and (max-width: 700px) {
    .print-pages {
        -webkit-transform: scale(0.5);
        -moz-transform:    scale(0.5);
        -ms-transform:     scale(0.5);
        -o-transform:      scale(0.5);
        transform:         scale(0.5);
    }
}

@@media screen and (max-width: 600px) {
    .print-pages {
        -webkit-transform: scale(0.4);
        -moz-transform:    scale(0.4);
        -ms-transform:     scale(0.4);
        -o-transform:      scale(0.4);
        transform:         scale(0.4);
    }
}

@@media screen and (max-width: 500px) {
    .print-pages {
        -webkit-transform: scale(0.3);
        -moz-transform:    scale(0.3);
        -ms-transform:     scale(0.3);
        -o-transform:      scale(0.3);
        transform:         scale(0.3);
    }
}

@@media print {
    @@page {
        height: 297mm;
        width: 210mm;
        margin: 15px;
    }
    body {
        width: auto;
        height: auto;
   }
   .hidden-print {
       display: none !important;
    }
    .service-info {
        display: none !important;
    }
    #your-records.print-document {
        page-break-after: always;
    }
   .print-document {
      margin: 10mm;
      border: none;
      width: 210mm;
      height: auto;
      padding: 10mm;
      box-shadow: none;
      zoom: 100%;
   }
   .information-box {
      background: #e1f3f1;
      -webkit-print-color-adjust: exact
   }
   .print-document .column-half {
       width: 50%;
       float: left;
   }

   #print-and-save-result {
      display: none;
   }
   .print-header {
       position: fixed;
       top: 0px;
       margin-top: 20mm;
       width: 210mm;
   }
   .notice .icon {
       position: absolute;
       left: 0;
       top: 50%;
       margin-top: -17px;
   }
   .icon-important {
       width: 35px;
       height: 35px;
   }
   .icon {
       display: inline-block;
       background-position: 0 0;
       background-repeat: no-repeat;
   }
   .centered-content {
       display: none;
   }
   #global-cookie-message {
       display: none;
   }
   .translate {
       display: none;
   }
   header {
       display: none;
   }
   .report-error__toggle.js-visible {
       display: none;
   }
   .govuk-check-your-answers.cya-questions-short, .govuk-check-your-answers.cya-questions-long {
       width: 100%;
   }
   .govuk-check-your-answers {
       display: table;
   }
   .govuk-check-your-answers > * {
       display: table-row;
       border-bottom-width: 0;
   }
   .govuk-check-your-answers > * {
       position: relative;
       border-bottom: 1px solid #bfc1c3;
   }
   .govuk-check-your-answers>*>* {
       display: table-cell;
       border-bottom: 1px solid #bfc1c3;
       padding: .63158em 1.05263em .47368em 0;
       margin: 0;
   }
   .govuk-check-your-answers.cya-questions-short .cya-question {
       width: 30%;
   }
   .govuk-check-your-answers>*:first-child>* {
       padding-top: 0;
   }
   .govuk-check-your-answers>*>* {
       display: table-cell;
       padding: .63158em 1.05263em .47368em 0;
       margin: 0;
   }
   .govuk-check-your-answers>*:first-child .cya-question {
       margin-top: 0;
   }
}
.page {
    margin-bottom: 10mm;
}
.section-heading {
    color: #005EA5;
    margin-top: 1em;
}
.answer--container {
    display: table;
    margin-top: 1em;
    page-break-inside: avoid !important;
    width: 100%;
}
.answer--question {
    float: left;
    width: 50%;
}
.answer--question p {
    margin-top: 0.5em;
}
.answer--question p strong {
    font-weight: 700;
}
.answer--answer {
    float: left;
    width: 50%;
}
.answer--answer p {
    margin-top: 0.5em;
    margin-left: 1em;
}

        </style>
        <title>@messages("application.title.pdf")</title>
    </head>
    <body>
        <div class="grid-row hidden-print">
            <div class="column-two-thirds"></div>
        </div>
        <div id="print-pages" class="print-pages">
    <div id="your-records" class="print-document">
        <div class="grid-row print-header">
            <div class="column-one-third">
                <img class="crown-logo-atar" alt="HM Revenue and Customs" src="@createLink("images/hmrc.svg")"/>
            </div>
            <div>
                <h2 class="heading-medium margin-top-small no-margin-bottom print-header__heading">
                    @messages("view.application.title.text")
                </h2>
            </div>
        </div>

        <div class="grid-row">
            <div class="column-full">
                <h3>@messages("view.application.your.record.text")</h3>
            </div>
            <div class="column-half column-one-half">
                <dl class="body-text">
                    <dt class="bold">@messages("view.application.eori")</dt>
                    <dt>@pdf.eori</dt>
                </dl>
                <dl class="body-text">
                    <dt class="bold">@messages("view.application.account.name")</dt>
                    <dt>@pdf.accountDetails.businessName</dt>
                </dl>
                <dl class="body-text">
                    <dt class="bold">@messages("view.application.account.address")</dt>
                    <dt>@pdf.accountDetails.addressLine1</dt>
                    <dt>@pdf.accountDetails.addressLine2</dt>
                    <dt>@pdf.accountDetails.addressLine3</dt>
                    <dt>@pdf.accountDetails.postcode</dt>
                    <dt>@messages(getCountryName(pdf.accountDetails.country).mkString)</dt>

                </dl>
            </div>
            <div class="column-half column-one-half">
                <dl class="body-text">
                    <dt class="bold">@messages("view.application.contact.name")</dt>
                    <dt>@pdf.contact.name</dt>
                </dl>
                <dl class="body-text">
                    <dt class="bold">@messages("view.application.contact.email")</dt>
                    <dt>@pdf.contact.email</dt>
                </dl>
                <dl class="body-text">
                    <dt class="bold">@messages("view.application.contact.phone")</dt>
                    <dt>@pdf.contact.phone</dt>
                </dl>
                <dl class="body-text">
                    <dt class="bold">@messages("view.application.contact.date")</dt>
                    <dt>@Dates.format(pdf.dateSubmitted)</dt>
                </dl>
            </div>
        </div>

        <div class="grid-row main-content">
            <div class="column-full">

                <div class="information-box">
                    <p class="hero-text">@messages("view.application.ref.text")<br>
                        <span class="reference-number">@pdf.reference</span>
                    </p>
                </div>

                <div class="grid-row">
                    <div class="column-two-thirds">
                        <h3>@messages("confirmation.heading2.whatNext")</h3>

                        @if(appConfig.samplesToggle){
                            <div class="panel panel-border-wide">@messages("view.application.paragraph.do.not.send.sample")</div>

                        } else {
                            @if(pdf.sendingSample) {
                                @if(pdf.hazardousSample){
                                    <div class="panel panel-border-wide">@messages("view.application.paragraph.do.not.send.sample")</div>
                                }else{
                                    <div class="notice">
                                        <i class="icon icon-important_">
                                            <span class="visually-hidden">Warning</span>
                                            <img src="@createLink("images/icon-important.png")"/>
                                        </i>
                                        <strong class="bold-small">
                                        @messages("confirmation.sendingSamples.important")
                                        </strong>
                                    </div>
                                    <div class="panel panel-border-wide mt-2">@messages("confirmation.returned.sample.note")</div>
                                }
                            }else{

                                <p class="govuk-body">@messages("view.application.paragraph.whatNext")</p>
                            }
                        }
                    </div>


                    @if(appConfig.samplesToggle){
                    <div class="column-one-third">

                        <div class="about-this-result-box-do-not-send about-this-result-box">
                            <div id="aboutThisResult" class="about-this-result">
                                <div class="date-of-result">
                                    <h2>@messages("application.footer.sendingSamples.heading")</h2>
                                </div>
                                <div>
                                    <div>@messages("view.application.paragraph.do.not.send.sample")</div>
                                </div>
                            </div>
                        </div>
                    </div>
                            } else {

                        @if(pdf.sendingSample) {
                            <div class="column-one-third">
                                <div class=@if(pdf.hazardousSample){"about-this-result-box-do-not-send about-this-result-box"} else {"about-this-result-box"}>
                                <div id="aboutThisResult" class="about-this-result">
                                    <div class="date-of-result">
                                        <h2>@messages("application.footer.sendingSamples.heading")</h2>
                                    </div>
                                    @if(pdf.hazardousSample) {
                                        <div>@messages("view.application.paragraph.do.not.send.sample")</div>
                                    } else {
                                        <div class="date-of-result decision-service-version">
                                            <div>@messages("view.application.sending.sample.paragraph1")</div>
                                            <div class="bold mb-2">@pdf.reference</div>
                                        </div>
                                        <div class="decision-service-version">
                                            <div class="mb-2">@messages("confirmation.paragraph0.sendingSamples")</div>
                                        </div>
                                        <div>
                                            <dl>
                                                <dt><p><span class="bold">@messages("application.footer.sendingSamplesTo.heading")</span></p>
                                                </dt>
                                                <address>
                                                @Html(messages("confirmation.sendingSamples.address"))
                                                </address>
                                            </dl>
                                        </div>
                                    }
                                </div>
                            </div>
                        }
                    </div>
                    }
                </div>
                </div>
            </div>
        </div>

    <div class="print-document" id="print-document">
    <div class="grid-row print-header">
        <div class="column-one-third">
            <img class="crown-logo-atar" alt="HM Revenue and Customs" src="@createLink("images/hmrc.svg")" />
        </div>
        <div>
            <h2 class="heading-medium margin-top-small no-margin-bottom print-header__heading">
                @messages("view.application.title.text")
            </h2>
        </div>
    </div>

    <div class="grid-row main-content">
        <div class="column-full">

            <h3 class="heading-medium">@messages("beforeYouStart.subheading1")</h3>
            <dl class="govuk-check-your-answers cya-questions-short">
                <div>
                    <dt class="cya-question">@messages("provideGoodsName.checkYourAnswersLabel")</dt>
                    <dd class="cya-answer">@pdf.goodsName</dd>
                </div>
                <div>
                    <dt class="cya-question">@messages("view.application.goods.details")</dt>
                    <dd class="cya-answer">@pdf.goodsDetails</dd>
                </div>
                @if(pdf.confidentialInformation.isDefined) {
                <div>
                    <dt class="cya-question">@messages("provideConfidentialInformation.checkYourAnswersLabel")</dt>
                    <dd class="cya-answer">@pdf.confidentialInformation</dd>
                </div>
                } else {
                <div>
                    <dt class="cya-question">@messages("provideConfidentialInformation.checkYourAnswersLabel")</dt>
                    <dd class="cya-answer">@messages("site.no")</dd>
                </div>
                }
                @if(pdf.attachments.isEmpty) {
                <div>
                    <dt class="cya-question">@messages("supportingMaterialFileList.checkYourAnswersLabel")</dt>
                    <dd class="cya-answer">@messages("site.no")</dd>
                </div>
                } else {
                 <div>
                    <dt class="cya-question">@messages("supportingMaterialFileList.checkYourAnswersLabel")</dt>
                    <dd class="cya-answer"><div class="pre-wrap">@{pdf.supportingMaterialFileList}</div></dd>
                  </div>
                }

                    @if(!appConfig.samplesToggle){
                        @if(pdf.sendingSample) {
                            <div>
                                <dt class="cya-question">@messages("areYouSendingSamples.checkYourAnswersLabel")</dt>
                                <dd class="cya-answer">@{if(pdf.sendingSample) {messages("site.yes")} else {messages("site.no")}}</dd>
                            </div>
                            <div>
                                <dt class="cya-question">@messages("isSampleHazardous.checkYourAnswersLabel")</dt>
                                <dd class="cya-answer">@{if(pdf.hazardousSample) {messages("site.yes")} else {messages("site.no")}}</dd>
                            </div>
                            <div>
                                <dt class="cya-question">@messages("returnSamples.checkYourAnswersLabel")</dt>
                                <dd class="cya-answer">@{if(pdf.returnSample) {messages("site.yes")} else {messages("site.no")}}</dd>
                            </div>
                        } else {
                            <div>
                                <dt class="cya-question">@messages("areYouSendingSamples.checkYourAnswersLabel")</dt>
                                <dd class="cya-answer">@messages("site.no")</dd>
                            </div>
                        }
                    }

                @if(pdf.foundCommodityCode.isDefined) {
                <div>
                    <dt class="cya-question">@messages("application.section.aboutItem.envisagedCommodityCode")</dt>
                    <dd class="cya-answer">@pdf.foundCommodityCode</dd>
                </div>
                } else {
                <div>
                    <dt class="cya-question">@messages("view.applicationPdf.foundComodityCode")</dt>
                    <dd class="cya-answer">@messages("site.no")</dd>
                </div>
                }

                @if(pdf.legalProblems.isDefined) {
                <div>
                    <dt class="cya-question">@messages("view.applicationPdf.legalProblem")</dt>
                    <dd class="cya-answer">@pdf.legalProblems</dd>
                </div>
                } else {
                <div>
                    <dt class="cya-question">@messages("view.applicationPdf.legalProblemQuestion")</dt>
                    <dd class="cya-answer">@messages("site.no")</dd>
                </div>
                }

            </dl>
            <h3 class="heading-medium">@messages("beforeYouStart.subheading2")</h3>
            <dl class="govuk-check-your-answers cya-questions-short section">
                @if(pdf.reissuedBTIReference.isEmpty) {
                    <div>
                        <dt class="cya-question">@messages("provideBTIReference.checkYourAnswersLabel")</dt>
                        <dd class="cya-answer">@messages("site.no")</dd>
                    </div>
                } else {
                    <div>
                        <dt class="cya-question">@messages("provideBTIReference.checkYourAnswersLabel")</dt>
                        <dd class="cya-answer">@pdf.reissuedBTIReference</dd>
                    </div>
                }

                @if(pdf.similarAtarReferences.isEmpty) {
                <div>
                    <dt class="cya-question">@messages("commodityCodeRulingReference.checkYourAnswersLabel")</dt>
                    <dd class="cya-answer">@messages("site.no")</dd>
                </div>
                } else {
                <div>
                    <dt class="cya-question">@messages("commodityCodeRulingReference.checkYourAnswersLabel")</dt>
                    <dd class="cya-answer"><div class="pre-wrap">@{pdf.similarAtarCodes}</div></dd>
                </div>
                }
            </dl>
        </div>
    </div>
</div>
    </body>

</html>